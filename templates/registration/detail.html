{% extends 'base.html' %} {% block title %}Detail Pendaftaran{% endblock %} {%
block content %}
<div class="container">
  <div class="row mb-4">
    <div class="col">
      <h2><i class="bi bi-file-earmark-text"></i> Detail Pendaftaran</h2>
      <p class="text-muted">{{ registration.registration_number }}</p>
    </div>
    <div class="col-auto">
      {% if registration.status == 'DRAFT' %}
      <span class="badge bg-secondary fs-6">Draft</span>
      {% elif registration.status == 'SUBMITTED' %}
      <span class="badge bg-primary fs-6">Submitted</span>
      {% elif registration.status == 'PAID' %}
      <span class="badge bg-warning text-dark fs-6">Paid</span>
      {% elif registration.status == 'VERIFIED' %}
      <span class="badge bg-success fs-6">Verified</span>
      {% elif registration.status == 'REJECTED' %}
      <span class="badge bg-danger fs-6">Rejected</span>
      {% endif %}
    </div>
  </div>

  <!-- Data Pribadi -->
  <div class="card mb-3">
    <div class="card-header bg-light">
      <h5 class="mb-0">Data Pribadi</h5>
    </div>
    <div class="card-body">
      <div class="row">
        <div class="col-md-6">
          <p><strong>Nama Lengkap:</strong> {{ registration.full_name }}</p>
          <p><strong>NISN:</strong> {{ registration.nisn }}</p>
          <p>
            <strong>Tempat, Tanggal Lahir:</strong> {{ registration.birth_place
            }}, {{ registration.birth_date|date:"d F Y" }}
          </p>
          <p>
            <strong>Jenis Kelamin:</strong> {{ registration.get_gender_display
            }}
          </p>
        </div>
        <div class="col-md-6">
          <p>
            <strong>Asal Sekolah:</strong> {{ registration.previous_school }}
          </p>
          <p>
            <strong>Tahun Lulus:</strong> {{ registration.graduation_year }}
          </p>
          <p>
            <strong>Program Pilihan:</strong> {{
            registration.get_program_choice_display }}
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- Dokumen -->
  <div class="card mb-3">
    <div class="card-header bg-light">
      <h5 class="mb-0">Dokumen</h5>
    </div>
    <div class="card-body">
      {% if documents %}
      <div class="list-group">
        {% for doc in documents %}
        <div
          class="list-group-item d-flex justify-content-between align-items-center"
        >
          <div>
            <i class="bi bi-file-earmark-pdf text-danger"></i>
            <strong>{{ doc.get_document_type_display }}</strong>
            <br />
            <small class="text-muted">{{ doc.original_filename }}</small>
          </div>
          <div>
            {% if doc.is_verified %}
            <span class="badge bg-success">Verified</span>
            {% endif %}
            <a
              href="{{ doc.file.url }}"
              target="_blank"
              class="btn btn-sm btn-outline-primary"
            >
              <i class="bi bi-download"></i> Download
            </a>
          </div>
        </div>
        {% endfor %}
      </div>
      {% else %}
      <p class="text-muted">Belum ada dokumen yang diupload.</p>
      {% endif %} {% if can_edit %}
      <a
        href="{% url 'registration:documents' registration.id %}"
        class="btn btn-primary mt-3"
      >
        <i class="bi bi-upload"></i> Upload Dokumen
      </a>
      {% endif %}
    </div>
  </div>

  <!-- Actions -->
  <div class="card">
    <div class="card-body">
      {% if can_edit %}
      <a
        href="{% url 'registration:edit' registration.id %}"
        class="btn btn-warning"
      >
        <i class="bi bi-pencil"></i> Edit Data
      </a>
      {% endif %} {% if can_submit %}
      <form
        method="post"
        action="{% url 'registration:submit' registration.id %}"
        class="d-inline"
      >
        {% csrf_token %}
        <button
          type="submit"
          class="btn btn-success"
          onclick="return confirm('Yakin ingin submit pendaftaran?');"
        >
          <i class="bi bi-check-circle"></i> Submit Pendaftaran
        </button>
      </form>
      {% endif %} {% if registration.status == 'SUBMITTED' and payment %}
      <a
        href="{% url 'payments:instructions' payment.id %}"
        class="btn btn-primary"
      >
        <i class="bi bi-credit-card"></i> Lihat Instruksi Pembayaran
      </a>
      {% endif %}

      <a href="{% url 'dashboard:home' %}" class="btn btn-secondary">
        <i class="bi bi-arrow-left"></i> Kembali
      </a>
    </div>
  </div>
</div>
{% endblock %}
